<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>PORTAL ENIGMA FALLS - Oficial</title>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    <style>
        :root { --rosa: #ff007f; --preto: #000; }
        body { font-family: 'Arial', sans-serif; background: #fdfdfd; margin: 0; padding-bottom: 50px; }
        header { background: #fff; padding: 20px 5%; border-bottom: 2px solid var(--preto); display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 35px; font-weight: 900; letter-spacing: -2px; text-transform: uppercase; }
        #adminPanel { display: none; background: #111; color: #fff; padding: 30px; border-bottom: 6px solid var(--rosa); }
        .form-admin { max-width: 700px; margin: auto; display: flex; flex-direction: column; gap: 15px; }
        input, textarea { padding: 12px; border: none; font-size: 16px; width: 100%; box-sizing: border-box; }
        .btn-pub { background: var(--rosa); color: white; border: none; padding: 18px; font-weight: bold; cursor: pointer; text-transform: uppercase; }
        .magazine-page { background: #fff; max-width: 850px; margin: 40px auto; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .meta-info { display: flex; justify-content: space-between; font-size: 12px; font-weight: bold; border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 20px; }
        .title-main { font-size: 75px; font-weight: 900; line-height: 0.85; margin: 0; text-transform: uppercase; letter-spacing: -3px; }
        .title-sub { font-size: 60px; color: var(--rosa); font-style: italic; margin-top: -5px; margin-bottom: 30px; font-weight: 300; }
        .grid-layout { display: grid; grid-template-columns: 1.3fr 1fr; gap: 35px; }
        .text-area { font-size: 17px; line-height: 1.5; text-align: justify; color: #222; }
        .image-area { position: relative; }
        .image-area img { width: 100%; border-radius: 2px; }
        .pink-detail { position: absolute; top: -15px; right: -15px; width: 60px; height: 60px; background: var(--rosa); z-index: -1; }
        #btnLogin { position: fixed; bottom: 15px; right: 15px; background: #000; color: #fff; border: none; padding: 10px; cursor: pointer; border-radius: 50%; width: 45px; height: 45px; opacity: 0.3; }
    </style>
</head>
<body>
<div id="adminPanel">
    <div class="form-admin">
        <h2 style="color: var(--rosa); margin: 0;">RedaÃ§Ã£o Portal Enigma Falls</h2>
        <input type="text" id="ipt-titulo" placeholder="TÃ­tulo (Ex: EXCLUSIVO)">
        <input type="text" id="ipt-artista" placeholder="Nome do Artista (Ex: AJAAXY)">
        <textarea id="ipt-fatos" rows="4" placeholder="Fatos da notÃ­cia..."></textarea>
        <input type="text" id="ipt-img" placeholder="Link da Foto (URL)">
        <button class="btn-pub" onclick="publicarNoticia()">Publicar no Jornal</button>
    </div>
</div>
<header>
    <div class="logo">PORTAL ENTRETENIMENTO</div>
    <div id="display-user" style="font-weight: bold;">ENIGMA FALLS</div>
</header>
<div id="feed"></div>
<button id="btnLogin">ðŸ”’</button>
<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBtQZwmY-PG9SVlFueM0o2n4Mj0ebVQwTY",
        authDomain: "portal-enigma-falls.firebaseapp.com",
        projectId: "portal-enigma-falls",
        storageBucket: "portal-enigma-falls.firebasestorage.app",
        messagingSenderId: "1066927825058",
        appId: "1:1066927825058:web:61ec0e94c15dc1ab33f7fb"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    // GMAIL ATUALIZADO
    const autorizados = ["ft5461299@gmail.com"]; 

    document.getElementById('btnLogin').onclick = () => {
        auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());
    };
    auth.onAuthStateChanged(user => {
        if (user && autorizados.includes(user.email.toLowerCase())) {
            document.getElementById('adminPanel').style.display = 'block';
            document.getElementById('display-user').innerText = "MODO EDITOR";
        }
    });
    function publicarNoticia() {
        const tit = document.getElementById('ipt-titulo').value;
        const art = document.getElementById('ipt-artista').value;
        const fat = document.getElementById('ipt-fatos').value;
        const img = document.getElementById('ipt-img').value;
        const textoGerado = `A cidade de Enigma Falls acaba de receber um momento histÃ³rico. A presenÃ§a de ${art} marca o inÃ­cio de uma nova trajetÃ³ria. Segundo nossa redaÃ§Ã£o apurou: "${fat}".`;
        db.ref('noticias').push({
            titulo: tit, artista: art, texto: textoGerado, imagem: img, 
            data: new Date().toLocaleDateString('pt-BR', {day:'numeric', month:'long'})
        }).then(() => { alert("Postado!"); location.reload(); });
    }
    db.ref('noticias').on('value', snap => {
        const feed = document.getElementById('feed');
        feed.innerHTML = "";
        snap.forEach(item => {
            const n = item.val();
            feed.innerHTML += `
                <div class="magazine-page">
                    <div class="meta-info"><span>REDAÃ‡ÃƒO</span> <span>PORTAL</span> <span>${n.data}</span></div>
                    <h1 class="title-main">${n.titulo}</h1>
                    <h2 class="title-sub">${n.artista}</h2>
                    <div class="grid-layout">
                        <div class="text-area"><p>${n.texto}</p></div>
                        <div class="image-area"><div class="pink-detail"></div><img src="${n.imagem}"></div>
                    </div>
                </div>`;
        });
    });
</script>
</body>
</html>